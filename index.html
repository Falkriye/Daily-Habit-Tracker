<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4CAF50">
    <meta name="description" content="Aplikasi sederhana untuk melacak kebiasaan harian Anda">
    <title>Daily Habit Tracker Pro</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <style>
        :root {
            --primary-color: #4CAF50;
            --primary-dark: #388E3C;
            --secondary-color: #2196F3;
            --premium-color: #FFD700;
            --premium-gradient: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            --background: #f8f9fa;
            --card-bg: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --success-light: #e8f5e9;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
        }

        .container {
            max-width: 600px;
        }

        /* Login Styles */
        .login-container {
            max-width: 400px;
            margin: 100px auto;
        }

        .login-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .login-header h2 {
            color: var(--text-primary);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: block;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .btn-login {
            width: 100%;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 14px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-login:hover {
            background: var(--primary-dark);
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            font-size: 0.9rem;
        }

        .error-message.show {
            display: block;
        }

        /* App Header */
        .app-header {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content h1 {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 5px;
            font-size: 1.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .premium-badge {
            background: var(--premium-gradient);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-logout {
            background: #f44336;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Premium Banner */
        .premium-banner {
            background: var(--premium-gradient);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .premium-banner:hover {
            transform: translateY(-2px);
        }

        .premium-banner h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .premium-banner ul {
            list-style: none;
            margin: 15px 0;
            padding: 0;
        }

        .premium-banner li {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .premium-banner li i {
            color: white;
        }

        .btn-upgrade {
            background: white;
            color: #FF6B35;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        /* Premium Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-header h2 {
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .price-tag {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 20px 0;
        }

        .price-tag small {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .features-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .features-list li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .features-list li:last-child {
            border-bottom: none;
        }

        .features-list i {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .btn-subscribe {
            width: 100%;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }

        .btn-close-modal {
            width: 100%;
            background: transparent;
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* AI Coach Section */
        .ai-coach-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            box-shadow: var(--shadow);
        }

        .ai-coach-card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .suggestion-box {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .suggestion-box h4 {
            font-size: 1rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .suggestion-box p {
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Community Section */
        .community-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .community-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .community-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .community-stat {
            flex: 1;
            text-align: center;
            padding: 15px;
            background: var(--background);
            border-radius: 10px;
        }

        .community-stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .community-stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .btn-join-community {
            width: 100%;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Stats Card */
        .stats-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            box-shadow: var(--shadow);
        }

        .stats-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .progress {
            height: 10px;
            border-radius: 10px;
            background: rgba(255,255,255,0.3);
        }

        .progress-bar {
            background: white;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        /* Input Card */
        .input-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        #habitInput {
            flex: 1;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 12px 15px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        #habitInput:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .btn-add {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            white-space: nowrap;
        }

        .btn-add:hover {
            background: var(--primary-dark);
        }

        /* Habits Card */
        .habits-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .habits-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .habits-header h3 {
            color: var(--text-primary);
            font-size: 1.2rem;
            margin: 0;
        }

        .btn-reset {
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .habit-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .habit-item {
            background: var(--background);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .habit-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .habit-item.completed {
            background: var(--success-light);
        }

        .habit-item.completed .habit-text {
            text-decoration: line-through;
            color: var(--text-secondary);
        }

        .habit-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--primary-color);
        }

        .habit-text {
            flex: 1;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .btn-delete {
            background: #f44336;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 0.9rem;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0.9;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 576px) {
            .app-header {
                flex-direction: column;
                gap: 15px;
            }

            .user-info {
                width: 100%;
                justify-content: space-between;
            }

            .stat-number {
                font-size: 1.5rem;
            }

            .input-group {
                flex-direction: column;
            }

            .btn-add {
                width: 100%;
            }

            .community-stats {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <i class="bi bi-check2-circle"></i>
                <h2>Daily Habit Tracker</h2>
                <p style="color: var(--text-secondary);">Masuk untuk melanjutkan</p>
            </div>
            
            <div id="errorMessage" class="error-message">
                Email atau password salah!
            </div>

            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input 
                        type="email" 
                        id="emailInput" 
                        class="form-control" 
                        placeholder="admin@gmail.com"
                        required
                    >
                </div>

                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input 
                        type="password" 
                        id="passwordInput" 
                        class="form-control" 
                        placeholder="Masukkan password"
                        required
                    >
                </div>

                <button type="submit" class="btn-login">
                    <i class="bi bi-box-arrow-in-right"></i> Masuk
                </button>
            </form>

            <div style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                <p>Demo: admin@gmail.com / password123</p>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="appScreen" class="container hidden">
        <!-- Header -->
        <div class="app-header">
            <div class="header-content">
                <h1><i class="bi bi-check2-circle"></i> Daily Habit Tracker</h1>
                <p style="color: var(--text-secondary); margin: 0;">Selamat datang kembali!</p>
            </div>
            <div class="user-info">
                <div id="premiumBadge" class="premium-badge hidden">
                    <i class="bi bi-star-fill"></i> Premium
                </div>
                <button id="logoutButton" class="btn-logout">
                    <i class="bi bi-box-arrow-right"></i> Keluar
                </button>
            </div>
        </div>

        <!-- Premium Banner (shown only for non-premium users) -->
        <div id="premiumBanner" class="premium-banner">
            <h3><i class="bi bi-star-fill"></i> Upgrade ke Premium</h3>
            <p style="margin: 0; opacity: 0.9;">Dapatkan fitur eksklusif untuk memaksimalkan kebiasaan Anda!</p>
            <ul>
                <li><i class="bi bi-check-circle-fill"></i> AI Coach & Rekomendasi Personal</li>
                <li><i class="bi bi-check-circle-fill"></i> Join Komunitas Eksklusif</li>
                <li><i class="bi bi-check-circle-fill"></i> Integrasi Kalender</li>
                <li><i class="bi bi-check-circle-fill"></i> Tips Harian Otomatis</li>
            </ul>
            <button class="btn-upgrade" onclick="app.openPremiumModal()">
                Upgrade Sekarang - Rp9.900
            </button>
        </div>

        <!-- AI Coach Card (Premium Only) -->
        <div id="aiCoachCard" class="ai-coach-card hidden">
            <h3><i class="bi bi-robot"></i> AI Coach - Rekomendasi Harian</h3>
            
            <div class="suggestion-box">
                <h4><i class="bi bi-lightbulb-fill"></i> Saran Kebiasaan</h4>
                <p>Berdasarkan pola Anda, coba tambahkan "Meditasi 10 menit" setelah bangun tidur. Ini akan meningkatkan fokus sepanjang hari.</p>
            </div>

            <div class="suggestion-box">
                <h4><i class="bi bi-graph-up"></i> Saran Intensitas</h4>
                <p>Kebiasaan "Olahraga" sebaiknya dilakukan 3-4 kali seminggu untuk hasil optimal. Hindari berlebihan di awal.</p>
            </div>

            <div class="suggestion-box">
                <h4><i class="bi bi-emoji-smile"></i> Tips Hari Ini</h4>
                <p>"Konsistensi adalah kunci. Lebih baik 10 menit setiap hari daripada 2 jam sekali seminggu. Terus semangat!"</p>
            </div>
        </div>

        <!-- Community Card (Premium Only) -->
        <div id="communityCard" class="community-card hidden">
            <div class="community-header">
                <h3><i class="bi bi-people-fill"></i> Komunitas Premium</h3>
            </div>

            <div class="community-stats">
                <div class="community-stat">
                    <div class="community-stat-number">2,847</div>
                    <div class="community-stat-label">Anggota Aktif</div>
                </div>
                <div class="community-stat">
                    <div class="community-stat-number">156</div>
                    <div class="community-stat-label">Post Hari Ini</div>
                </div>
            </div>

            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                Bergabunglah dengan ribuan orang yang berkomitmen membangun kebiasaan positif. Berbagi pengalaman, dapatkan motivasi, dan raih target bersama!
            </p>

            <button class="btn-join-community">
                <i class="bi bi-chat-dots"></i> Buka Grup Komunitas
            </button>
        </div>

        <!-- Stats Card -->
        <div class="stats-card">
            <div class="stats-content">
                <div class="stat-item">
                    <span id="completedCount" class="stat-number">0</span>
                    <span class="stat-label">Selesai</span>
                </div>
                <div class="stat-item">
                    <span id="totalCount" class="stat-number">0</span>
                    <span class="stat-label">Total Kebiasaan</span>
                </div>
                <div class="stat-item">
                    <span id="percentage" class="stat-number">0%</span>
                    <span class="stat-label">Progress</span>
                </div>
            </div>
            <div class="progress">
                <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%"></div>
            </div>
        </div>

        <!-- Input Card -->
        <div class="input-card">
            <div class="input-group">
                <input 
                    type="text" 
                    id="habitInput" 
                    placeholder="Masukkan kebiasaan baru..." 
                    maxlength="100"
                >
                <button id="addButton" class="btn-add">
                    <i class="bi bi-plus-lg"></i> Tambah
                </button>
            </div>
        </div>

        <!-- Habits List Card -->
        <div class="habits-card">
            <div class="habits-header">
                <h3><i class="bi bi-list-check"></i> Daftar Kebiasaan</h3>
                <button id="resetButton" class="btn-reset">
                    <i class="bi bi-arrow-clockwise"></i> Reset Hari Ini
                </button>
            </div>
            <ul id="habitList" class="habit-list">
                <!-- Habits will be inserted here -->
            </ul>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><i class="bi bi-heart-fill"></i> Bangun kebiasaan positif, raih kesuksesan!</p>
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="premiumModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <i class="bi bi-star-fill" style="font-size: 3rem; color: var(--premium-color);"></i>
                <h2>Upgrade ke Premium</h2>
                <p style="color: var(--text-secondary);">Maksimalkan potensi kebiasaan Anda</p>
            </div>

            <div style="text-align: center;">
                <div class="price-tag">
                    Rp9.900
                    <small>/bulan</small>
                </div>
            </div>

            <ul class="features-list">
                <li>
                    <i class="bi bi-robot"></i>
                    <div>
                        <strong>AI Coach & Rekomendasi</strong><br>
                        <small style="color: var(--text-secondary);">Saran kebiasaan berdasarkan jadwal & intensitas personal</small>
                    </div>
                </li>
                <li>
                    <i class="bi bi-lightbulb-fill"></i>
                    <div>
                        <strong>Tips Harian Otomatis</strong><br>
                        <small style="color: var(--text-secondary);">Motivasi dan panduan setiap hari</small>
                    </div>
                </li>
                <li>
                    <i class="bi bi-people-fill"></i>
                    <div>
                        <strong>Komunitas Eksklusif</strong><br>
                        <small style="color: var(--text-secondary);">Berbagi pengalaman dengan 2,800+ anggota aktif</small>
                    </div>
                </li>
                <li>
                    <i class="bi bi-calendar-check"></i>
                    <div>
                        <strong>Integrasi Kalender</strong><br>
                        <small style="color: var(--text-secondary);">Sinkronisasi dengan Google Calendar & reminder otomatis</small>
                    </div>
                </li>
                <li>
                    <i class="bi bi-graph-up-arrow"></i>
                    <div>
                        <strong>Analisis Mendalam</strong><br>
                        <small style="color: var(--text-secondary);">Laporan progress & insight personal</small>
                    </div>
                </li>
            </ul>

            <button class="btn-subscribe" onclick="app.subscribePremium()">
                <i class="bi bi-credit-card"></i> Berlangganan Sekarang
            </button>

            <button class="btn-close-modal" onclick="app.closePremiumModal()">
                Nanti Saja
            </button>
        </div>
    </div>

    <script>
        // Authentication System
        class AuthSystem {
            constructor() {
                this.validEmail = 'admin@gmail.com';
                this.validPassword = 'password123';
            }

            login(email, password) {
                if (email === this.validEmail && password === this.validPassword) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('userEmail', email);
                    return true;
                }
                return false;
            }

            logout() {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
            }

            isAuthenticated() {
                return localStorage.getItem('isLoggedIn') === 'true';
            }

            isPremium() {
                return localStorage.getItem('isPremium') === 'true';
            }

            setPremium(status) {
                localStorage.setItem('isPremium', status ? 'true' : 'false');
            }
        }

        // Habit Tracker App
        class HabitTracker {
            constructor() {
                this.auth = new AuthSystem();
                this.habits = this.loadHabits();
                this.init();
            }

            init() {
                this.checkAuth();
                this.setupEventListeners();
                
                if (this.auth.isAuthenticated()) {
                    this.showApp();
                    this.updatePremiumUI();
                    this.renderHabits();
                    this.updateStats();
                    this.checkNewDay();
                }
            }

            checkAuth() {
                if (!this.auth.isAuthenticated()) {
                    this.showLogin();
                }
            }

            showLogin() {
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('appScreen').classList.add('hidden');
            }

            showApp() {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('appScreen').classList.remove('hidden');
            }

            setupEventListeners() {
                // Login form
                document.getElementById('loginForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('emailInput').value;
                    const password = document.getElementById('passwordInput').value;
                    
                    if (this.auth.login(email, password)) {
                        document.getElementById('errorMessage').classList.remove('show');
                        this.showApp();
                        this.updatePremiumUI();
                        this.renderHabits();
                        this.updateStats();
                    } else {
                        document.getElementById('errorMessage').classList.add('show');
                    }
                });

                // Logout button
                document.getElementById('logoutButton').addEventListener('click', () => {
                    if (confirm('Yakin ingin keluar?')) {
                        this.auth.logout();
                        this.showLogin();
                        document.getElementById('emailInput').value = '';
                        document.getElementById('passwordInput').value = '';
                    }
                });

                // Habit input
                const habitInput = document.getElementById('habitInput');
                const addButton = document.getElementById('addButton');
                const resetButton = document.getElementById('resetButton');

                addButton.addEventListener('click', () => {
                    this.addHabit(habitInput.value);
                    habitInput.value = '';
                });

                habitInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.addHabit(habitInput.value);
                        habitInput.value = '';
                    }
                });

                resetButton.addEventListener('click', () => {
                    if (confirm('Reset semua checklist hari ini?')) {
                        this.resetDaily();
                    }
                });

                // Premium banner click
                document.getElementById('premiumBanner').addEventListener('click', () => {
                    this.openPremiumModal();
                });
            }

            updatePremiumUI() {
                const isPremium = this.auth.isPremium();
                
                // Toggle premium badge
                document.getElementById('premiumBadge').classList.toggle('hidden', !isPremium);
                
                // Toggle premium banner
                document.getElementById('premiumBanner').classList.toggle('hidden', isPremium);
                
                // Toggle premium features
                document.getElementById('aiCoachCard').classList.toggle('hidden', !isPremium);
                document.getElementById('communityCard').classList.toggle('hidden', !isPremium);
            }

            openPremiumModal() {
                if (!this.auth.isPremium()) {
                    document.getElementById('premiumModal').classList.add('show');
                }
            }

            closePremiumModal() {
                document.getElementById('premiumModal').classList.remove('show');
            }

            subscribePremium() {
                // Simulate payment process
                const confirmPayment = confirm('Lanjutkan pembayaran Rp9.900 untuk berlangganan Premium?');
                
                if (confirmPayment) {
                    this.auth.setPremium(true);
                    this.closePremiumModal();
                    this.updatePremiumUI();
                    
                    // Show success message
                    alert('ðŸŽ‰ Selamat! Anda sekarang adalah member Premium!\n\nNikmati semua fitur eksklusif kami.');
                }
            }

            loadHabits() {
                const saved = localStorage.getItem('habits');
                return saved ? JSON.parse(saved) : [];
            }

            saveHabits() {
                localStorage.setItem('habits', JSON.stringify(this.habits));
            }

            checkNewDay() {
                const lastDate = localStorage.getItem('lastDate');
                const today = new Date().toDateString();
                
                if (lastDate !== today) {
                    this.habits.forEach(habit => habit.completed = false);
                    this.saveHabits();
                    localStorage.setItem('lastDate', today);
                }
            }

            addHabit(text) {
                if (!text.trim()) return;
                
                const habit = {
                    id: Date.now(),
                    text: text.trim(),
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                this.habits.push(habit);
                this.saveHabits();
                this.renderHabits();
                this.updateStats();
            }

            toggleHabit(id) {
                const habit = this.habits.find(h => h.id === id);
                if (habit) {
                    habit.completed = !habit.completed;
                    this.saveHabits();
                    this.renderHabits();
                    this.updateStats();
                }
            }

            deleteHabit(id) {
                this.habits = this.habits.filter(h => h.id !== id);
                this.saveHabits();
                this.renderHabits();
                this.updateStats();
            }

            resetDaily() {
                this.habits.forEach(habit => habit.completed = false);
                this.saveHabits();
                this.renderHabits();
                this.updateStats();
            }

            renderHabits() {
                const habitList = document.getElementById('habitList');
                
                if (this.habits.length === 0) {
                    habitList.innerHTML = `
                        <div class="empty-state">
                            <i class="bi bi-clipboard-x"></i>
                            <p>Belum ada kebiasaan. Yuk tambahkan kebiasaan pertamamu!</p>
                        </div>
                    `;
                    return;
                }

                habitList.innerHTML = this.habits.map(habit => `
                    <li class="habit-item ${habit.completed ? 'completed' : ''} fade-in" data-id="${habit.id}">
                        <input 
                            type="checkbox" 
                            class="habit-checkbox" 
                            ${habit.completed ? 'checked' : ''}
                            onchange="app.toggleHabit(${habit.id})"
                        >
                        <span class="habit-text">${this.escapeHtml(habit.text)}</span>
                        <button class="btn-delete" onclick="app.deleteHabit(${habit.id})">
                            <i class="bi bi-trash"></i>
                        </button>
                    </li>
                `).join('');
            }

            updateStats() {
                const total = this.habits.length;
                const completed = this.habits.filter(h => h.completed).length;
                const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;

                document.getElementById('totalCount').textContent = total;
                document.getElementById('completedCount').textContent = completed;
                document.getElementById('percentage').textContent = percentage + '%';
                document.getElementById('progressBar').style.width = percentage + '%';
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Initialize App
        const app = new HabitTracker();

        // Set last date on first load
        if (!localStorage.getItem('lastDate')) {
            localStorage.setItem('lastDate', new Date().toDateString());
        }
    </script>
</body>
</html>